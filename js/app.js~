		$(document).foundation('offcanvas', 'reflow');

		var app=angular.module('app', ['mm.foundation','ngRoute']);
		angular.module('app').controller('OffCanvasCtrl', function ($scope) {
			//init();
		});

		app.config(['$routeProvider',
		  function($routeProvider) {
			    $routeProvider.
			      when('/landing', {
			        templateUrl: 'html/list.html',
			        controller: 'ListCtrl'
			      }).
			      when('/maps/:layerId', {
			        templateUrl: 'html/maps.html',
			        controller: 'MapCtrl'
			      }).

			      when('/acumuladas', {
			        templateUrl: 'html/maps.html',
			        controller: 'AccuCtrl'
			      }).
			      when('/gmaps', {
			        templateUrl: 'html/maps.html',
			        controller: 'GMapsCtrl'
			      }).
			      otherwise({
			        redirectTo: '/landing'
			      });
		  }]);

		app.controller('ListCtrl', ['$scope','$http', function($scope,$http) {
			 $http.get('config.json').success(function(data) {
   				 $scope.layers = data;
			  });

			  $scope.orderProp = 'name';
		}]);

		app.controller('AccuCtrl',  ['$scope', '$routeParams', function($scope, $routeParams) {
			  $scope.layer = "hidrosur:precipitaciones_municipios";
			  $scope.leyendUrl="/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=";
			  init($scope.layer);
		}]);

		app.controller('GMapsCtrl', ['$scope', '$routeParams', function($scope, $routeParams) {
			$scope.layer = $routeParams.layerId;
			$scope.leyendUrl="/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=";
			loader();
		}]);
		app.controller('MapsCtrl', ['$scope', '$routeParams', function($scope, $routeParams) {
			$scope.layer = $routeParams.layerId;
			$scope.leyendUrl="/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=";
			init($scope.layer);
		}]);
